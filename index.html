<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ÂúÜÁõòÊäΩÂ•ñÂô®</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Microsoft YaHei", Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .container {
        background: white;
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        max-width: 600px;
        width: 100%;
      }

      h1 {
        text-align: center;
        color: #333;
        margin-bottom: 30px;
        font-size: 28px;
      }

      .question-input {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 40px;
        flex-wrap: wrap;
        gap: 10px;
      }

      .question-text {
        font-size: 24px;
        color: #333;
      }

      .question-input input {
        font-size: 24px;
        padding: 10px 15px;
        border: 2px solid #667eea;
        border-radius: 8px;
        outline: none;
        min-width: 80px;
        width: auto;
        transition: border-color 0.3s;
      }

      .question-input input:focus {
        border-color: #764ba2;
      }

      .wheel-container {
        position: relative;
        width: 400px;
        height: 400px;
        margin: 0 auto 30px;
      }

      .wheel {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        position: absolute;
        top: 0;
        left: 0;
        border: 8px solid #333;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        transition: transform 3s cubic-bezier(0.17, 0.67, 0.12, 0.99);
        background: conic-gradient(
          from -60deg,
          #ffe66d 0deg 120deg,
          #4ecdc4 120deg 240deg,
          #ff6b6b 240deg 360deg
        );
      }

      .section-text {
        position: absolute;
        font-size: 36px;
        font-weight: bold;
        color: #333;
        text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.8);
        z-index: 10;
        pointer-events: none;
        white-space: nowrap;
      }

      .section-text-1 {
        /* ‰∏çÂÅö - Âú®È°∂ÈÉ® */
        top: 15%;
        left: 50%;
        transform: translateX(-50%);
      }

      .section-text-2 {
        /* ÂèØËÉΩÂÅö - Âè≥‰∏ã */
        bottom: 25%;
        right: 15%;
      }

      .section-text-3 {
        /* ÂÅö - Â∑¶‰∏ã */
        bottom: 25%;
        left: 15%;
      }

      .pointer {
        position: absolute;
        top: -20px;
        left: 50%;
        transform: translateX(-50%) rotate(0deg);
        transform-origin: 50% 220px;
        width: 0;
        height: 0;
        border-left: 20px solid transparent;
        border-right: 20px solid transparent;
        border-top: 40px solid #333;
        z-index: 100;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        cursor: grab;
        transition: transform 0.1s ease-out;
      }

      .pointer:active {
        cursor: grabbing;
      }

      .pointer.dragging {
        transition: none;
      }

      .spin-button {
        display: block;
        margin: 0 auto;
        padding: 15px 40px;
        font-size: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
      }

      .spin-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
      }

      .spin-button:active {
        transform: translateY(0);
      }

      .spin-button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }

      .result {
        text-align: center;
        margin-top: 20px;
        font-size: 24px;
        font-weight: bold;
        color: #333;
        min-height: 40px;
      }

      .control-buttons {
        position: fixed;
        bottom: 24px;
        right: 24px;
        display: flex;
        gap: 8px;
        z-index: 1000;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        padding: 8px;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .control-button {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        border: 1px solid rgba(0, 0, 0, 0.08);
        background: transparent;
        color: #666;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        transition: all 0.2s ease;
        text-decoration: none;
        font-weight: 500;
      }

      .control-button:hover {
        background: rgba(0, 0, 0, 0.05);
        color: #333;
        border-color: rgba(0, 0, 0, 0.12);
      }

      .control-button:active {
        transform: scale(0.95);
      }

      .control-button svg {
        width: 18px;
        height: 18px;
      }

      /* ÈªëÊöóÊ®°ÂºèÊ†∑Âºè */
      body.dark-mode {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      }

      body.dark-mode .container {
        background: #2d2d44;
        color: #e0e0e0;
      }

      body.dark-mode h1 {
        color: #e0e0e0;
      }

      body.dark-mode .question-text {
        color: #e0e0e0;
      }

      body.dark-mode .question-input input {
        background: #3d3d5c;
        color: #e0e0e0;
        border-color: #667eea;
      }

      body.dark-mode .question-input input:focus {
        border-color: #764ba2;
      }

      body.dark-mode .wheel {
        border-color: #555;
      }

      body.dark-mode .pointer {
        border-top-color: #555;
      }

      body.dark-mode .section-text {
        color: #e0e0e0;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      }

      body.dark-mode .result {
        color: #e0e0e0;
      }

      body.dark-mode .control-buttons {
        background: rgba(45, 45, 68, 0.95);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      }

      body.dark-mode .control-button {
        border-color: rgba(255, 255, 255, 0.1);
        color: #b0b0b0;
      }

      body.dark-mode .control-button:hover {
        background: rgba(255, 255, 255, 0.08);
        color: #e0e0e0;
        border-color: rgba(255, 255, 255, 0.15);
      }

      @media (max-width: 600px) {
        body {
          padding: 10px;
        }

        .container {
          padding: 20px;
          max-width: 100%;
        }

        .wheel-container {
          width: min(300px, calc(100vw - 60px));
          height: min(300px, calc(100vw - 60px));
          max-width: 300px;
          max-height: 300px;
        }

        .wheel-section {
          font-size: 24px;
        }

        .question-text {
          font-size: 20px;
        }

        .question-input {
          margin-bottom: 30px;
        }

        .question-input input {
          font-size: 20px;
          min-width: 60px;
          width: auto;
        }

        .pointer {
          top: -15px;
          transform-origin: 50% 165px;
        }

        h1 {
          font-size: 24px;
          margin-bottom: 20px;
        }

        .control-buttons {
          bottom: 12px;
          right: 12px;
          padding: 6px;
          gap: 6px;
        }

        .control-button {
          width: 36px;
          height: 36px;
          font-size: 14px;
        }

        .control-button svg {
          width: 16px;
          height: 16px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üéØ ÂúÜÁõòÊäΩÂ•ñÂô®</h1>

      <div class="question-input">
        <span class="question-text">ÊàëË¶ÅÂéª</span>
        <input type="text" id="questionInput" />
        <span class="question-text">ÂêóÔºü</span>
      </div>

      <div class="wheel-container">
        <div class="wheel" id="wheel"></div>
        <div class="pointer" id="pointer"></div>
        <div class="section-text section-text-1">‰∏çÂÅö</div>
        <div class="section-text section-text-2">ÂèØËÉΩÂÅö</div>
        <div class="section-text section-text-3">ÂÅö</div>
      </div>

      <button class="spin-button" id="spinButton">ÂºÄÂßãÊäΩÂ•ñ</button>

      <div class="result" id="result"></div>
    </div>

    <div class="control-buttons">
      <button class="control-button" id="langButton" title="ÂàáÊç¢ËØ≠Ë®Ä">
        ‰∏≠/EN
      </button>
      <a
        id="githubLink"
        href="https://github.com/EaminC/Decider"
        target="_blank"
        rel="noopener noreferrer"
        class="control-button"
        title="GitHub"
      >
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
          />
        </svg>
      </a>
      <button class="control-button" id="themeButton" title="ÂàáÊç¢‰∏ªÈ¢ò">
        üåô
      </button>
    </div>

    <script>
      // ËØ≠Ë®ÄÂíå‰∏ªÈ¢òÁÆ°ÁêÜ
      const translations = {
        zh: {
          title: "üéØ ÂúÜÁõòÊäΩÂ•ñÂô®",
          questionPrefix: "ÊàëË¶ÅÂéª",
          questionSuffix: "ÂêóÔºü",
          spinButton: "ÂºÄÂßãÊäΩÂ•ñ",
          result: "ÁªìÊûúÔºö‰∏çÂÅöÔºÅ",
          langButton: "‰∏≠/EN",
          themeButton: "üåô",
          section1: "‰∏çÂÅö",
          section2: "ÂèØËÉΩÂÅö",
          section3: "ÂÅö",
          langTitle: "ÂàáÊç¢ËØ≠Ë®Ä",
          themeTitle: "ÂàáÊç¢‰∏ªÈ¢ò",
          githubTitle: "GitHub",
        },
        en: {
          title: "üéØ Decision Wheel",
          questionPrefix: "Should I",
          questionSuffix: "?",
          spinButton: "Spin",
          result: "Result: Don't do it!",
          langButton: "EN/‰∏≠",
          themeButton: "üåô",
          section1: "Don't",
          section2: "Maybe",
          section3: "Do",
          langTitle: "Toggle Language",
          themeTitle: "Toggle Theme",
          githubTitle: "GitHub",
        },
      };

      let currentLang = localStorage.getItem("language") || "zh";
      let isDarkMode = localStorage.getItem("darkMode") === "true";
      let pointerAngle = 0; // ÂàùÂßã‰ΩçÁΩÆÂßãÁªàÂú®Ê≠£‰∏äÊñπ

      // ÂàùÂßãÂåñËØ≠Ë®ÄÂíå‰∏ªÈ¢ò
      function initLanguage() {
        updateLanguage(currentLang);
      }

      function updateLanguage(lang) {
        currentLang = lang;
        localStorage.setItem("language", lang);
        const t = translations[lang];

        document.querySelector("h1").textContent = t.title;
        document.querySelector(".question-text:first-child").textContent =
          t.questionPrefix;
        document.querySelector(".question-text:last-child").textContent =
          t.questionSuffix;
        document.getElementById("spinButton").textContent = t.spinButton;
        document.getElementById("langButton").textContent = t.langButton;
        document.getElementById("langButton").title = t.langTitle;
        document.getElementById("themeButton").title = t.themeTitle;
        document.getElementById("githubLink").title = t.githubTitle;
        document.querySelector(".section-text-1").textContent = t.section1;
        document.querySelector(".section-text-2").textContent = t.section2;
        document.querySelector(".section-text-3").textContent = t.section3;
        document.documentElement.lang = lang;
      }

      function initTheme() {
        if (isDarkMode) {
          document.body.classList.add("dark-mode");
          document.getElementById("themeButton").textContent = "‚òÄÔ∏è";
        } else {
          document.body.classList.remove("dark-mode");
          document.getElementById("themeButton").textContent = "üåô";
        }
      }

      function toggleTheme() {
        isDarkMode = !isDarkMode;
        localStorage.setItem("darkMode", isDarkMode);
        initTheme();
      }

      function toggleLanguage() {
        const newLang = currentLang === "zh" ? "en" : "zh";
        updateLanguage(newLang);
      }

      // ÂàùÂßãÂåñÊåáÈíà‰ΩçÁΩÆ
      function initPointer() {
        updatePointerRotation(pointerAngle);
      }

      // Êõ¥Êñ∞ÊåáÈíàÊóãËΩ¨ËßíÂ∫¶
      function updatePointerRotation(angle) {
        const pointer = document.getElementById("pointer");
        pointer.style.transform = `translateX(-50%) rotate(${angle}deg)`;
      }

      // ÂàùÂßãÂåñ
      initLanguage();
      initTheme();
      initPointer();

      // ÁªëÂÆö‰∫ã‰ª∂
      document
        .getElementById("langButton")
        .addEventListener("click", toggleLanguage);
      document
        .getElementById("themeButton")
        .addEventListener("click", toggleTheme);

      const wheel = document.getElementById("wheel");
      const spinButton = document.getElementById("spinButton");
      const result = document.getElementById("result");
      const pointer = document.getElementById("pointer");
      const wheelContainer = document.querySelector(".wheel-container");
      let isSpinning = false;
      let isDragging = false;
      let dragStartAngle = 0;
      let dragStartPointerAngle = 0;

      // Ê†πÊçÆÊåáÈíàËßíÂ∫¶Ëé∑ÂèñÊåáÂêëÁöÑÂå∫Âüü
      // ÈªÑËâ≤Âå∫ÂüüÔºà"‰∏çÂÅö"ÔºâÂú®300-60Â∫¶ÔºàË∑®Ë∂ä0Â∫¶Ôºâ
      // ÈùíËâ≤Âå∫ÂüüÔºà"ÂèØËÉΩÂÅö"ÔºâÂú®60-180Â∫¶
      // Á∫¢Ëâ≤Âå∫ÂüüÔºà"ÂÅö"ÔºâÂú®180-300Â∫¶
      function getSectionFromPointerAngle(angle) {
        // Â∞ÜËßíÂ∫¶Ê†áÂáÜÂåñÂà∞0-360Â∫¶
        const normalizedAngle = ((angle % 360) + 360) % 360;

        if (normalizedAngle >= 60 && normalizedAngle < 180) {
          return 2; // "ÂèØËÉΩÂÅö"
        } else if (normalizedAngle >= 180 && normalizedAngle < 300) {
          return 3; // "ÂÅö"
        } else {
          return 1; // "‰∏çÂÅö"
        }
      }

      // Ëé∑ÂèñÁªìÊûúÊñáÊú¨
      function getResultText(section) {
        const t = translations[currentLang];
        if (section === 1) {
          return t.result; // "‰∏çÂÅö"
        } else if (section === 2) {
          return currentLang === "zh" ? "ÁªìÊûúÔºöÂèØËÉΩÂÅöÔºÅ" : "Result: Maybe!";
        } else {
          return currentLang === "zh" ? "ÁªìÊûúÔºöÂÅöÔºÅ" : "Result: Do it!";
        }
      }

      function getRandomAngleForSection(section) {
        if (section === 1) {
          // 320¬∞-360¬∞ ‰∏é 0¬∞-40¬∞
          return (320 + Math.random() * 80) % 360;
        } else if (section === 2) {
          // 80¬∞-160¬∞
          return 80 + Math.random() * 80;
        }
        // section 3: 200¬∞-280¬∞
        return 200 + Math.random() * 80;
      }

      // ÊåáÈíàÊãñÂä®ÂäüËÉΩ
      function setupPointerDrag() {
        pointer.addEventListener("mousedown", startDrag);
        pointer.addEventListener("touchstart", startDrag, { passive: false });
        document.addEventListener("mousemove", drag);
        document.addEventListener("touchmove", drag, { passive: false });
        document.addEventListener("mouseup", endDrag);
        document.addEventListener("touchend", endDrag);
      }

      function startDrag(e) {
        if (isSpinning) return;
        e.preventDefault();
        isDragging = true;
        pointer.classList.add("dragging");

        const containerRect = wheelContainer.getBoundingClientRect();
        const centerX = containerRect.left + containerRect.width / 2;
        const centerY = containerRect.top + containerRect.height / 2;

        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;

        // ËÆ°ÁÆóÈº†Ê†áÁõ∏ÂØπ‰∫éÂúÜÁõò‰∏≠ÂøÉÁöÑËßíÂ∫¶
        // atan2ËøîÂõû-180Âà∞180Â∫¶ÔºåÊàë‰ª¨ÈúÄË¶ÅËΩ¨Êç¢‰∏∫0-360Â∫¶ÔºåÂπ∂‰∏îÊåáÈíàÂàùÂßãÂú®È°∂ÈÉ®Ôºà-90Â∫¶Ôºâ
        let angle =
          Math.atan2(clientY - centerY, clientX - centerX) * (180 / Math.PI);
        angle = (angle + 90 + 360) % 360; // ËΩ¨Êç¢‰∏∫‰ª•È°∂ÈÉ®‰∏∫0Â∫¶ÁöÑËßíÂ∫¶
        dragStartAngle = angle;
        dragStartPointerAngle = pointerAngle;
      }

      function drag(e) {
        if (!isDragging) return;
        e.preventDefault();

        const containerRect = wheelContainer.getBoundingClientRect();
        const centerX = containerRect.left + containerRect.width / 2;
        const centerY = containerRect.top + containerRect.height / 2;

        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;

        // ËÆ°ÁÆóÈº†Ê†áÁõ∏ÂØπ‰∫éÂúÜÁõò‰∏≠ÂøÉÁöÑËßíÂ∫¶
        let angle =
          Math.atan2(clientY - centerY, clientX - centerX) * (180 / Math.PI);
        angle = (angle + 90 + 360) % 360; // ËΩ¨Êç¢‰∏∫‰ª•È°∂ÈÉ®‰∏∫0Â∫¶ÁöÑËßíÂ∫¶

        const deltaAngle = angle - dragStartAngle;

        // Â§ÑÁêÜËßíÂ∫¶Ë∑®Ë∂ä0Â∫¶ÁöÑÊÉÖÂÜµ
        let newAngle = dragStartPointerAngle + deltaAngle;
        if (deltaAngle > 180) {
          newAngle -= 360;
        } else if (deltaAngle < -180) {
          newAngle += 360;
        }

        pointerAngle = newAngle;
        updatePointerRotation(pointerAngle);

        // ÂÆûÊó∂ÊòæÁ§∫ÁªìÊûú
        const section = getSectionFromPointerAngle(pointerAngle);
        result.textContent = getResultText(section);
      }

      function endDrag() {
        if (!isDragging) return;
        isDragging = false;
        pointer.classList.remove("dragging");
        localStorage.setItem("pointerAngle", pointerAngle);
      }

      // ËÆ°ÁÆóÊóãËΩ¨ËßíÂ∫¶ÔºåËÆ©ÂúÜÁõòÊóãËΩ¨ÂêéÊåáÂêëÊåáÈíàÂΩìÂâçÊåáÂêëÁöÑÂå∫Âüü
      function spinWheel() {
        if (isSpinning) return;

        isSpinning = true;
        spinButton.disabled = true;
        result.textContent = "";

        // Ëé∑ÂèñÂΩìÂâçÊóãËΩ¨ËßíÂ∫¶ÂíåÊåáÈíàËßíÂ∫¶
        const currentRotation = getCurrentRotation();
        const targetSection = getSectionFromPointerAngle(pointerAngle);

        // ÁîüÊàêÈöèÊú∫ÊóãËΩ¨ÂúàÊï∞Ôºà3-8ÂúàÔºâ
        const randomSpins = 3 + Math.random() * 5;

        // ËÆ°ÁÆóÁõÆÊ†áÂå∫ÂüüÁöÑËßíÂ∫¶ËåÉÂõ¥
        // ÈªÑËâ≤Âå∫ÂüüÔºà"‰∏çÂÅö"ÔºâÂú®300-60Â∫¶ÔºàË∑®Ë∂ä0Â∫¶Ôºâ
        // ÈùíËâ≤Âå∫ÂüüÔºà"ÂèØËÉΩÂÅö"ÔºâÂú®60-180Â∫¶
        // Á∫¢Ëâ≤Âå∫ÂüüÔºà"ÂÅö"ÔºâÂú®180-300Â∫¶
        const targetAngle = getRandomAngleForSection(targetSection);

        // ËÆ°ÁÆóÈúÄË¶ÅÊóãËΩ¨ÁöÑËßíÂ∫¶ÔºåËÆ©ÁõÆÊ†áÂå∫ÂüüÂØπÂáÜÊåáÈíà
        // ÊåáÈíàÂΩìÂâçËßíÂ∫¶ÂØπÂ∫îÁöÑÂúÜÁõò‰ΩçÁΩÆÈúÄË¶ÅÊóãËΩ¨Âà∞ÁõÆÊ†áËßíÂ∫¶
        const pointerRelativeAngle = ((pointerAngle % 360) + 360) % 360;
        const adjustment = (targetAngle - pointerRelativeAngle + 360) % 360;

        const baseAdjustment = (360 - (currentRotation % 360)) % 360;
        const totalRotation =
          currentRotation + randomSpins * 360 + baseAdjustment + adjustment;

        wheel.style.transform = `rotate(${totalRotation}deg)`;

        // 3ÁßíÂêéÊòæÁ§∫ÁªìÊûú
        setTimeout(() => {
          result.textContent = getResultText(targetSection);
          isSpinning = false;
          spinButton.disabled = false;
        }, 3000);
      }

      // Ëé∑ÂèñÂΩìÂâçÊóãËΩ¨ËßíÂ∫¶
      function getCurrentRotation() {
        const style = window.getComputedStyle(wheel);
        const matrix =
          style.transform || style.webkitTransform || style.mozTransform;

        if (matrix === "none" || !matrix) {
          return 0;
        }

        const values = matrix.split("(")[1].split(")")[0].split(",");
        const a = values[0];
        const b = values[1];
        const angle = Math.round(Math.atan2(b, a) * (180 / Math.PI));

        return angle < 0 ? angle + 360 : angle;
      }

      // Ëé∑ÂèñÈöèÊú∫ËßíÂ∫¶ÔºåÂü∫‰∫éÁõÆÊ†áÂå∫Âüü
      function getRandomAngleForSection(section) {
        let angle;
        if (section === 1) {
          // "‰∏çÂÅö" - ÈÄâÊã©300-60Â∫¶‰πãÈó¥ÁöÑÈöèÊú∫ËßíÂ∫¶
          angle = 300 + Math.random() * 30;
        } else if (section === 2) {
          // "ÂèØËÉΩÂÅö" - ÈÄâÊã©60-180Â∫¶‰πãÈó¥ÁöÑÈöèÊú∫ËßíÂ∫¶
          angle = 60 + Math.random() * 120;
        } else {
          // "ÂÅö" - ÈÄâÊã©180-300Â∫¶‰πãÈó¥ÁöÑÈöèÊú∫ËßíÂ∫¶
          angle = 180 + Math.random() * 120;
        }
        return angle;
      }

      // Ëá™Âä®Ë∞ÉÊï¥ËæìÂÖ•Ê°ÜÂÆΩÂ∫¶
      function adjustInputWidth() {
        const input = document.getElementById("questionInput");
        const value = input.value || "";
        if (value.length === 0) {
          input.style.width = "80px";
          return;
        }

        const tempSpan = document.createElement("span");
        tempSpan.style.visibility = "hidden";
        tempSpan.style.position = "absolute";
        tempSpan.style.whiteSpace = "pre";
        tempSpan.style.fontSize = window.getComputedStyle(input).fontSize;
        tempSpan.style.fontFamily = window.getComputedStyle(input).fontFamily;
        tempSpan.style.fontWeight = window.getComputedStyle(input).fontWeight;
        tempSpan.style.letterSpacing =
          window.getComputedStyle(input).letterSpacing;
        tempSpan.textContent = value;
        document.body.appendChild(tempSpan);
        const textWidth = tempSpan.offsetWidth;
        document.body.removeChild(tempSpan);

        const padding =
          parseFloat(window.getComputedStyle(input).paddingLeft) +
          parseFloat(window.getComputedStyle(input).paddingRight);
        const minWidth = window.innerWidth <= 600 ? 60 : 80;
        input.style.width = Math.max(minWidth, textWidth + padding + 10) + "px";
      }

      // ÂàùÂßãÂåñÊãñÂä®ÂäüËÉΩ
      setupPointerDrag();

      spinButton.addEventListener("click", spinWheel);

      // ËæìÂÖ•Ê°ÜËá™Âä®Ë∞ÉÊï¥ÂÆΩÂ∫¶
      const questionInput = document.getElementById("questionInput");
      questionInput.addEventListener("input", adjustInputWidth);
      questionInput.addEventListener("focus", adjustInputWidth);
      adjustInputWidth(); // ÂàùÂßãÂåñÂÆΩÂ∫¶

      // ÂõûËΩ¶ÈîÆ‰πüÂèØ‰ª•Ëß¶Âèë
      questionInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter" && !isSpinning) {
          spinWheel();
        }
      });
    </script>
  </body>
</html>
